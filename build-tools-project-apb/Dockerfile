FROM openshift3/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJ1aWxkLXRvb2xzLXByb2plY3QtYXBiCmRlc2NyaXB0aW9uOiBU\
aGlzIEFQQiBjcmVhdGVzIGEgc3RhbmRhcmQgc2V0IG9mIGJ1aWxkIHRvb2xzIGluIGFuIE9DUCBw\
cm9qZWN0CmJpbmRhYmxlOiBUcnVlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToKICBkaXNwbGF5\
TmFtZTogIk1pdHppQ29tIEJ1aWxkIFRvb2xzIFByb2plY3QiCiAgcHJvdmlkZXJEaXNwbGF5TmFt\
ZTogIk1pdHppQ29tIgogIGRlcGVuZGVuY2llczogW10KICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0\
cHM6Ly9naXRodWIuY29tL3J5YW4taGlnaGxleS9vY3AtYWR2ZGV2LWhvbWV3b3JrL3RyZWUvbWFz\
dGVyL2J1aWxkLXRvb2xzLXByb2plY3QtYXBiIgpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAg\
IGRlc2NyaXB0aW9uOiBUaGUgcGxhbiBkZXBsb3lpbmcgdmFyaW91cyBidWlsZCB0b29scyB0byB0\
aGUgcHJvamVjdAogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6IHt9CiAgICBwYXJhbWV0ZXJz\
OgogICAgICAtIG5hbWU6IGluY2x1ZGVfZ29ncwogICAgICAgIHRpdGxlOiBEZXBsb3kgR29ncz8K\
ICAgICAgICB0eXBlOiBib29sZWFuCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZh\
dWx0OiBUcnVlCiAgICAgICAgZGlzcGxheV9ncm91cDogR29ncyBDb25maWd1cmF0aW9uCiAgICAg\
IC0gbmFtZTogZ29nc192b2x1bWVfcmVxdWVzdAogICAgICAgIHRpdGxlOiBEYXRhIFBlcnNpc3Rl\
bnQgVm9sdW1lIFNpemUgUmVxdWVzdGVkCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVx\
dWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiA0R2kKICAgICAgICBkaXNwbGF5X2dyb3VwOiBH\
b2dzIENvbmZpZ3VyYXRpb24KICAgICAgLSBuYW1lOiBnb2dzX2RiX3VzZXIKICAgICAgICB0aXRs\
ZTogRGF0YWJhc2UgVXNlcm5hbWUKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJl\
ZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IGdvZ3MKICAgICAgICBkaXNwbGF5X2dyb3VwOiBHb2dz\
IENvbmZpZ3VyYXRpb24KICAgICAgLSBuYW1lOiBnb2dzX2RiX3Bhc3N3b3JkCiAgICAgICAgdGl0\
bGU6IERhdGFiYXNlIFBhc3N3b3JkCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWly\
ZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiBnb2dzCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNz\
d29yZAogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEdvZ3MgQ29uZmlndXJhdGlvbgogICAgICAtIG5h\
bWU6IGdvZ3NfZGJfbmFtZQogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBOYW1lCiAgICAgICAgdHlw\
ZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiBnb2dzCiAg\
ICAgICAgZGlzcGxheV9ncm91cDogR29ncyBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogZ29n\
c19kYl92b2x1bWVfcmVxdWVzdAogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBQZXJzaXN0ZW50IFZv\
bHVtZSBTaXplIFJlcXVlc3RlZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVk\
OiBUcnVlCiAgICAgICAgZGVmYXVsdDogNEdpCiAgICAgICAgZGlzcGxheV9ncm91cDogR29ncyBD\
b25maWd1cmF0aW9uCgogICAgICAtIG5hbWU6IGluY2x1ZGVfc29uYXJxdWJlCiAgICAgICAgdGl0\
bGU6IERlcGxveSBTb25hclF1YmU/CiAgICAgICAgdHlwZTogYm9vbGVhbgogICAgICAgIHJlcXVp\
cmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogVHJ1ZQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IFNv\
bmFyUXViZSBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogc29uYXJxdWJlX2RiX3VzZXIKICAg\
ICAgICB0aXRsZTogRGF0YWJhc2UgVXNlcm5hbWUKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAg\
ICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IHNvbmFyCiAgICAgICAgZGlzcGxheV9n\
cm91cDogU29uYXJRdWJlIENvbmZpZ3VyYXRpb24KICAgICAgLSBuYW1lOiBzb25hcnF1YmVfZGJf\
cGFzc3dvcmQKICAgICAgICB0aXRsZTogRGF0YWJhc2UgUGFzc3dvcmQKICAgICAgICB0eXBlOiBz\
dHJpbmcKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IHNvbmFyCiAgICAg\
ICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIGRpc3BsYXlfZ3JvdXA6IFNvbmFyUXVi\
ZSBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogc29uYXJxdWJlX2RiX25hbWUKICAgICAgICB0\
aXRsZTogRGF0YWJhc2UgTmFtZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVk\
OiBUcnVlCiAgICAgICAgZGVmYXVsdDogc29uYXIKICAgICAgICBkaXNwbGF5X2dyb3VwOiBTb25h\
clF1YmUgQ29uZmlndXJhdGlvbgogICAgICAtIG5hbWU6IHNvbmFycXViZV9kYl92b2x1bWVfcmVx\
dWVzdAogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBQZXJzaXN0ZW50IFZvbHVtZSBTaXplIFJlcXVl\
c3RlZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAg\
ZGVmYXVsdDogNEdpCiAgICAgICAgZGlzcGxheV9ncm91cDogU29uYXJRdWJlIENvbmZpZ3VyYXRp\
b24KICAgICAgLSBuYW1lOiBzb25hcnF1YmVfbWVtb3J5X3JlcXVlc3QKICAgICAgICB0aXRsZTog\
TWVtb3J5IFJlcXVlc3RlZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiBU\
cnVlCiAgICAgICAgZGVmYXVsdDogMS41R2kKICAgICAgICBkaXNwbGF5X2dyb3VwOiBTb25hclF1\
YmUgQ29uZmlndXJhdGlvbgogICAgICAtIG5hbWU6IHNvbmFycXViZV9tZW1vcnlfbGltaXQKICAg\
ICAgICB0aXRsZTogTWVtb3J5IExpbWl0CiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVx\
dWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiAzR2kKICAgICAgICBkaXNwbGF5X2dyb3VwOiBT\
b25hclF1YmUgQ29uZmlndXJhdGlvbgogICAgICAtIG5hbWU6IHNvbmFycXViZV9jcHVfcmVxdWVz\
dAogICAgICAgIHRpdGxlOiBDUFUgUmVxdWVzdGVkCiAgICAgICAgdHlwZTogaW50ZWdlcgogICAg\
ICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogMQogICAgICAgIGRpc3BsYXlfZ3Jv\
dXA6IFNvbmFyUXViZSBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogc29uYXJxdWJlX2NwdV9s\
aW1pdAogICAgICAgIHRpdGxlOiBDUFUgTGltaXQKICAgICAgICB0eXBlOiBpbnRlZ2VyCiAgICAg\
ICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiAyCiAgICAgICAgZGlzcGxheV9ncm91\
cDogU29uYXJRdWJlIENvbmZpZ3VyYXRpb24KCiAgICAgIC0gbmFtZTogaW5jbHVkZV9uZXh1cwog\
ICAgICAgIHRpdGxlOiBEZXBsb3kgTmV4dXM/CiAgICAgICAgdHlwZTogYm9vbGVhbgogICAgICAg\
IHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogVHJ1ZQogICAgICAgIGRpc3BsYXlfZ3Jv\
dXA6IE5leHVzIENvbmZpZ3VyYXRpb24KICAgICAgLSBuYW1lOiBuZXh1c192b2x1bWVfcmVxdWVz\
dAogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBQZXJzaXN0ZW50IFZvbHVtZSBTaXplIFJlcXVlc3Rl\
ZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVm\
YXVsdDogNEdpCiAgICAgICAgZGlzcGxheV9ncm91cDogTmV4dXMgQ29uZmlndXJhdGlvbgogICAg\
ICAtIG5hbWU6IG5leHVzX21lbW9yeV9yZXF1ZXN0CiAgICAgICAgdGl0bGU6IE1lbW9yeSBSZXF1\
ZXN0ZWQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAg\
IGRlZmF1bHQ6IDFHaQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IE5leHVzIENvbmZpZ3VyYXRpb24K\
ICAgICAgLSBuYW1lOiBuZXh1c19tZW1vcnlfbGltaXQKICAgICAgICB0aXRsZTogTWVtb3J5IExp\
bWl0CiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBk\
ZWZhdWx0OiAyR2kKICAgICAgICBkaXNwbGF5X2dyb3VwOiBOZXh1cyBDb25maWd1cmF0aW9uCiAg\
ICAgIC0gbmFtZTogbmV4dXNfcmVkaGF0X3Byb3h5X3JlcG9zCiAgICAgICAgdGl0bGU6IENyZWF0\
ZSBSZWQgSGF0IGFuZCBKQm9zcyBwcm94eSByZXBvc2l0b3JpZXM/CiAgICAgICAgdHlwZTogYm9v\
bGVhbgogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogVHJ1ZQogICAgICAt\
IG5hbWU6IG5leHVzX21hdmVuX3Byb3h5X3JlcG9zCiAgICAgICAgdGl0bGU6IENyZWF0ZSBNYXZl\
biBQdWJsaWMgcHJveHkgcmVwb3NpdG9yeT8KICAgICAgICB0eXBlOiBib29sZWFuCiAgICAgICAg\
cmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiBUcnVlCiAgICAgIC0gbmFtZTogbmV4dXNf\
bnBtX3JlcG8KICAgICAgICB0aXRsZTogQ3JlYXRlIE5vZGUuanMgTlBNIHJlcG9zaXRvcnk/CiAg\
ICAgICAgdHlwZTogYm9vbGVhbgogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVs\
dDogVHJ1ZQogICAgICAtIG5hbWU6IG5leHVzX2RvY2tlcl9yZXBvcwogICAgICAgIHRpdGxlOiBD\
cmVhdGUgRG9ja2VyIHJlcG9zaXRvcnk/CiAgICAgICAgdHlwZTogYm9vbGVhbgogICAgICAgIHJl\
cXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogVHJ1ZQogICAgICAtIG5hbWU6IG5leHVzX21h\
dmVuX3JlbGVhc2VfcmVwb3MKICAgICAgICB0aXRsZTogQ3JlYXRlIE1hdmVuIHJlbGVhc2UgYXJ0\
aWZhY3QgcmVwb3NpdG9yeT8KICAgICAgICB0eXBlOiBib29sZWFuCiAgICAgICAgcmVxdWlyZWQ6\
IFRydWUKICAgICAgICBkZWZhdWx0OiBUcnVlCiAgICAgIC0gbmFtZTogbmV4dXNfbWF2ZW5fc25h\
cHNob3RfcmVwb3MKICAgICAgICB0aXRsZTogQ3JlYXRlIE1hdmVuIHNuYXBzaG90IGFydGlmYWN0\
IHJlcG9zaXRvcnk/CiAgICAgICAgdHlwZTogYm9vbGVhbgogICAgICAgIHJlcXVpcmVkOiBUcnVl\
CiAgICAgICAgZGVmYXVsdDogVHJ1ZQoKICAgICAgLSBuYW1lOiBpbmNsdWRlX2plbmtpbnMKICAg\
ICAgICB0aXRsZTogRGVwbG95IEplbmtpbnM/CiAgICAgICAgdHlwZTogYm9vbGVhbgogICAgICAg\
IHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogVHJ1ZQogICAgICAgIGRpc3BsYXlfZ3Jv\
dXA6IEplbmtpbnMgQ29uZmlndXJhdGlvbgogICAgICAtIG5hbWU6IGplbmtpbnNfdm9sdW1lX3Jl\
cXVlc3QKICAgICAgICB0aXRsZTogRGF0YWJhc2UgUGVyc2lzdGVudCBWb2x1bWUgU2l6ZSBSZXF1\
ZXN0ZWQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAg\
IGRlZmF1bHQ6IDRHaQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEplbmtpbnMgQ29uZmlndXJhdGlv\
bgogICAgICAtIG5hbWU6IGplbmtpbnNfbWVtb3J5X3JlcXVlc3QKICAgICAgICB0aXRsZTogTWVt\
b3J5IFJlcXVlc3RlZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiBUcnVl\
CiAgICAgICAgZGVmYXVsdDogMUdpCiAgICAgICAgZGlzcGxheV9ncm91cDogSmVua2lucyBDb25m\
aWd1cmF0aW9uCiAgICAgIC0gbmFtZTogamVua2luc19tZW1vcnlfbGltaXQKICAgICAgICB0aXRs\
ZTogTWVtb3J5IExpbWl0CiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IFRy\
dWUKICAgICAgICBkZWZhdWx0OiAyR2kKICAgICAgICBkaXNwbGF5X2dyb3VwOiBKZW5raW5zIENv\
bmZpZ3VyYXRpb24K"

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
