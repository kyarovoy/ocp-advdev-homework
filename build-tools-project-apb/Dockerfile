FROM openshift3/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGJ1aWxkLXRvb2xzLXByb2plY3QtYXBiCmRlc2NyaXB0aW9uOiBU\
aGlzIEFQQiBjcmVhdGVzIGEgc3RhbmRhcmQgc2V0IG9mIGJ1aWxkIHRvb2xzIGluIGFuIE9DUCBw\
cm9qZWN0CmJpbmRhYmxlOiBUcnVlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToKICBkaXNwbGF5\
TmFtZTogIk1pdHppQ29tIEJ1aWxkIFRvb2xzIFByb2plY3QiCiAgcHJvdmlkZXJEaXNwbGF5TmFt\
ZTogIk1pdHppQ29tIgogIGRlcGVuZGVuY2llczogW10KICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0\
cHM6Ly9naXRodWIuY29tL3J5YW4taGlnaGxleS9vY3AtYWR2ZGV2LWhvbWV3b3JrL3RyZWUvbWFz\
dGVyL2J1aWxkLXRvb2xzLXByb2plY3QtYXBiIgpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAg\
IGRlc2NyaXB0aW9uOiBUaGUgcGxhbiBkZXBsb3lpbmcgdmFyaW91cyBidWlsZCB0b29scyB0byB0\
aGUgcHJvamVjdAogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6IHt9CiAgICBwYXJhbWV0ZXJz\
OgogICAgICAtIG5hbWU6IGluY2x1ZGVfZ29ncwogICAgICAgIHRpdGxlOiBEZXBsb3kgR29ncz8K\
ICAgICAgICB0eXBlOiBib29sZWFuCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZh\
dWx0OiBUcnVlCiAgICAgICAgZGlzcGxheV9ncm91cDogR29ncyBDb25maWd1cmF0aW9uCiAgICAg\
IC0gbmFtZTogZ29nc192b2x1bWVfcmVxdWVzdAogICAgICAgIHRpdGxlOiBEYXRhIFBlcnNpc3Rl\
bnQgVm9sdW1lIFNpemUgUmVxdWVzdGVkCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVx\
dWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiA0R2kKICAgICAgICBkaXNwbGF5X2dyb3VwOiBH\
b2dzIENvbmZpZ3VyYXRpb24KICAgICAgLSBuYW1lOiBnb2dzX2RiX3VzZXIKICAgICAgICB0aXRs\
ZTogRGF0YWJhc2UgVXNlcm5hbWUKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJl\
ZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IGdvZ3MKICAgICAgICBkaXNwbGF5X2dyb3VwOiBHb2dz\
IENvbmZpZ3VyYXRpb24KICAgICAgLSBuYW1lOiBnb2dzX2RiX3Bhc3N3b3JkCiAgICAgICAgdGl0\
bGU6IERhdGFiYXNlIFBhc3N3b3JkCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWly\
ZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiBnb2dzCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNz\
d29yZAogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEdvZ3MgQ29uZmlndXJhdGlvbgogICAgICAtIG5h\
bWU6IGdvZ3NfZGJfbmFtZQogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBOYW1lCiAgICAgICAgdHlw\
ZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiBnb2dzCiAg\
ICAgICAgZGlzcGxheV9ncm91cDogR29ncyBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogZ29n\
c19kYl92b2x1bWVfcmVxdWVzdAogICAgICAgIHRpdGxlOiBEYXRhYmFzZSBQZXJzaXN0ZW50IFZv\
bHVtZSBTaXplIFJlcXVlc3RlZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVk\
OiBUcnVlCiAgICAgICAgZGVmYXVsdDogNEdpCiAgICAgICAgZGlzcGxheV9ncm91cDogR29ncyBD\
b25maWd1cmF0aW9uCgogICAgICAtIG5hbWU6IGluY2x1ZGVfc29uYXJxdWJlCiAgICAgICAgdGl0\
bGU6IERlcGxveSBTb25hclF1YmU/CiAgICAgICAgdHlwZTogYm9vbGVhbgogICAgICAgIHJlcXVp\
cmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogVHJ1ZQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IFNv\
bmFyUXViZSBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogc29uYXJxdWJlX3ZvbHVtZV9yZXF1\
ZXN0CiAgICAgICAgdGl0bGU6IERhdGEgUGVyc2lzdGVudCBWb2x1bWUgU2l6ZSBSZXF1ZXN0ZWQK\
ICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1\
bHQ6IDRHaQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IFNvbmFyUXViZSBDb25maWd1cmF0aW9uCiAg\
ICAgIC0gbmFtZTogc29uYXJxdWJlX2RiX3VzZXIKICAgICAgICB0aXRsZTogRGF0YWJhc2UgVXNl\
cm5hbWUKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAg\
IGRlZmF1bHQ6IHNvbmFyCiAgICAgICAgZGlzcGxheV9ncm91cDogU29uYXJRdWJlIENvbmZpZ3Vy\
YXRpb24KICAgICAgLSBuYW1lOiBzb25hcnF1YmVfZGJfcGFzc3dvcmQKICAgICAgICB0aXRsZTog\
RGF0YWJhc2UgUGFzc3dvcmQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDog\
VHJ1ZQogICAgICAgIGRlZmF1bHQ6IHNvbmFyCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29y\
ZAogICAgICAgIGRpc3BsYXlfZ3JvdXA6IFNvbmFyUXViZSBDb25maWd1cmF0aW9uCiAgICAgIC0g\
bmFtZTogc29uYXJxdWJlX2RiX25hbWUKICAgICAgICB0aXRsZTogRGF0YWJhc2UgTmFtZQogICAg\
ICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDog\
c29uYXIKICAgICAgICBkaXNwbGF5X2dyb3VwOiBTb25hclF1YmUgQ29uZmlndXJhdGlvbgogICAg\
ICAtIG5hbWU6IHNvbmFycXViZV9kYl92b2x1bWVfcmVxdWVzdAogICAgICAgIHRpdGxlOiBEYXRh\
YmFzZSBQZXJzaXN0ZW50IFZvbHVtZSBTaXplIFJlcXVlc3RlZAogICAgICAgIHR5cGU6IHN0cmlu\
ZwogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogNEdpCiAgICAgICAgZGlz\
cGxheV9ncm91cDogU29uYXJRdWJlIENvbmZpZ3VyYXRpb24KICAgICAgLSBuYW1lOiBzb25hcnF1\
YmVfbWVtb3J5X3JlcXVlc3QKICAgICAgICB0aXRsZTogTWVtb3J5IFJlcXVlc3RlZAogICAgICAg\
IHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogMS41\
R2kKICAgICAgICBkaXNwbGF5X2dyb3VwOiBTb25hclF1YmUgQ29uZmlndXJhdGlvbgogICAgICAt\
IG5hbWU6IHNvbmFycXViZV9tZW1vcnlfbGltaXQKICAgICAgICB0aXRsZTogTWVtb3J5IExpbWl0\
CiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZh\
dWx0OiAzR2kKICAgICAgICBkaXNwbGF5X2dyb3VwOiBTb25hclF1YmUgQ29uZmlndXJhdGlvbgog\
ICAgICAtIG5hbWU6IHNvbmFycXViZV9jcHVfcmVxdWVzdAogICAgICAgIHRpdGxlOiBDUFUgUmVx\
dWVzdGVkCiAgICAgICAgdHlwZTogaW50ZWdlcgogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAg\
ICAgZGVmYXVsdDogMQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IFNvbmFyUXViZSBDb25maWd1cmF0\
aW9uCiAgICAgIC0gbmFtZTogc29uYXJxdWJlX2NwdV9saW1pdAogICAgICAgIHRpdGxlOiBDUFUg\
TGltaXQKICAgICAgICB0eXBlOiBpbnRlZ2VyCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAg\
ICBkZWZhdWx0OiAyCiAgICAgICAgZGlzcGxheV9ncm91cDogU29uYXJRdWJlIENvbmZpZ3VyYXRp\
b24KCiAgICAgIC0gbmFtZTogaW5jbHVkZV9uZXh1cwogICAgICAgIHRpdGxlOiBEZXBsb3kgTmV4\
dXM/CiAgICAgICAgdHlwZTogYm9vbGVhbgogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAg\
ZGVmYXVsdDogVHJ1ZQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IE5leHVzIENvbmZpZ3VyYXRpb24K\
ICAgICAgLSBuYW1lOiBuZXh1c192b2x1bWVfcmVxdWVzdAogICAgICAgIHRpdGxlOiBEYXRhYmFz\
ZSBQZXJzaXN0ZW50IFZvbHVtZSBTaXplIFJlcXVlc3RlZAogICAgICAgIHR5cGU6IHN0cmluZwog\
ICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogNEdpCiAgICAgICAgZGlzcGxh\
eV9ncm91cDogTmV4dXMgQ29uZmlndXJhdGlvbgogICAgICAtIG5hbWU6IG5leHVzX21lbW9yeV9y\
ZXF1ZXN0CiAgICAgICAgdGl0bGU6IE1lbW9yeSBSZXF1ZXN0ZWQKICAgICAgICB0eXBlOiBzdHJp\
bmcKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IDFHaQogICAgICAgIGRp\
c3BsYXlfZ3JvdXA6IE5leHVzIENvbmZpZ3VyYXRpb24KICAgICAgLSBuYW1lOiBuZXh1c19tZW1v\
cnlfbGltaXQKICAgICAgICB0aXRsZTogTWVtb3J5IExpbWl0CiAgICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiAyR2kKICAgICAgICBkaXNw\
bGF5X2dyb3VwOiBOZXh1cyBDb25maWd1cmF0aW9uCiAgICAgIC0gbmFtZTogbmV4dXNfcmVkaGF0\
X3Byb3h5X3JlcG9zCiAgICAgICAgdGl0bGU6IENyZWF0ZSBSZWQgSGF0IGFuZCBKQm9zcyBwcm94\
eSByZXBvc2l0b3JpZXM/CiAgICAgICAgdHlwZTogYm9vbGVhbgogICAgICAgIHJlcXVpcmVkOiBU\
cnVlCiAgICAgICAgZGVmYXVsdDogVHJ1ZQogICAgICAtIG5hbWU6IG5leHVzX21hdmVuX3Byb3h5\
X3JlcG9zCiAgICAgICAgdGl0bGU6IENyZWF0ZSBNYXZlbiBQdWJsaWMgcHJveHkgcmVwb3NpdG9y\
eT8KICAgICAgICB0eXBlOiBib29sZWFuCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBk\
ZWZhdWx0OiBUcnVlCiAgICAgIC0gbmFtZTogbmV4dXNfbnBtX3JlcG8KICAgICAgICB0aXRsZTog\
Q3JlYXRlIE5vZGUuanMgTlBNIHJlcG9zaXRvcnk/CiAgICAgICAgdHlwZTogYm9vbGVhbgogICAg\
ICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogVHJ1ZQogICAgICAtIG5hbWU6IG5l\
eHVzX2RvY2tlcl9yZXBvcwogICAgICAgIHRpdGxlOiBDcmVhdGUgRG9ja2VyIHJlcG9zaXRvcnk/\
CiAgICAgICAgdHlwZTogYm9vbGVhbgogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVm\
YXVsdDogVHJ1ZQogICAgICAtIG5hbWU6IG5leHVzX21hdmVuX3JlbGVhc2VfcmVwb3MKICAgICAg\
ICB0aXRsZTogQ3JlYXRlIE1hdmVuIHJlbGVhc2UgYXJ0aWZhY3QgcmVwb3NpdG9yeT8KICAgICAg\
ICB0eXBlOiBib29sZWFuCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiBU\
cnVlCiAgICAgIC0gbmFtZTogbmV4dXNfbWF2ZW5fc25hcHNob3RfcmVwb3MKICAgICAgICB0aXRs\
ZTogQ3JlYXRlIE1hdmVuIHNuYXBzaG90IGFydGlmYWN0IHJlcG9zaXRvcnk/CiAgICAgICAgdHlw\
ZTogYm9vbGVhbgogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogVHJ1ZQoK\
ICAgICAgLSBuYW1lOiBpbmNsdWRlX2plbmtpbnMKICAgICAgICB0aXRsZTogRGVwbG95IEplbmtp\
bnM/CiAgICAgICAgdHlwZTogYm9vbGVhbgogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAg\
ZGVmYXVsdDogVHJ1ZQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEplbmtpbnMgQ29uZmlndXJhdGlv\
bgogICAgICAtIG5hbWU6IGplbmtpbnNfdm9sdW1lX3JlcXVlc3QKICAgICAgICB0aXRsZTogRGF0\
YWJhc2UgUGVyc2lzdGVudCBWb2x1bWUgU2l6ZSBSZXF1ZXN0ZWQKICAgICAgICB0eXBlOiBzdHJp\
bmcKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IDRHaQogICAgICAgIGRp\
c3BsYXlfZ3JvdXA6IEplbmtpbnMgQ29uZmlndXJhdGlvbgogICAgICAtIG5hbWU6IGplbmtpbnNf\
bWFzdGVyX21lbW9yeV9saW1pdAogICAgICAgIHRpdGxlOiBNYXN0ZXIgTWVtb3J5IExpbWl0CiAg\
ICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0\
OiAyR2kKICAgICAgICBkaXNwbGF5X2dyb3VwOiBKZW5raW5zIENvbmZpZ3VyYXRpb24KICAgICAg\
LSBuYW1lOiBqZW5raW5zX3NsYXZlX21lbW9yeV9saW1pdAogICAgICAgIHRpdGxlOiBTbGF2ZSBN\
ZW1vcnkgTGltaXQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogVHJ1ZQog\
ICAgICAgIGRlZmF1bHQ6IDJHaQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEplbmtpbnMgQ29uZmln\
dXJhdGlvbgo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
